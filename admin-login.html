<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Admin Panel - Silly Time</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #121212;
      color: white;
      margin: 0;
    }

    header {
      padding: 1rem;
      background: #1f1f1f;
      text-align: center;
    }

    h1 {
      margin: 0;
    }

    #suggestion-list {
      margin-top: 2rem;
      list-style-type: none;
      padding: 0;
    }

    #suggestion-list li {
      background-color: #333;
      padding: 1rem;
      margin: 0.5rem 0;
      border-radius: 8px;
    }

    .back-btn {
      padding: 0.5rem 1rem;
      background-color: #1976d2;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-decoration: none;
      font-size: 1rem;
      margin: 1rem;
    }

    .back-btn:hover {
      background-color: #1565c0;
    }

    /* Shoutout Form */
    .shoutout-form {
      background-color: #1f1f1f;
      padding: 2rem;
      margin-top: 2rem;
      border-radius: 8px;
    }

    .shoutout-form input,
    .shoutout-form textarea {
      width: 100%;
      padding: 1rem;
      font-size: 1rem;
      border: none;
      border-radius: 8px;
      background: #2a2a2a;
      color: white;
      margin-bottom: 1rem;
    }

    .shoutout-form button {
      padding: 0.5rem 1.2rem;
      font-size: 1rem;
      background-color: #28a745;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .shoutout-form button:hover {
      background-color: #218838;
    }
  </style>
</head>
<body>

<header>
  <h1>Admin Panel - Silly Time</h1>
</header>

<div id="suggestion-section">
  <h2>Suggestions</h2>
  <ul id="suggestion-list"></ul> <!-- Suggestions will appear here -->
</div>

<!-- Shoutout Form -->
<div class="shoutout-form">
  <h3>Set Daily Shoutout</h3>
  <label for="shoutout-name">Name:</label>
  <input type="text" id="shoutout-name" placeholder="Enter shoutout name" />
  <label for="shoutout-message">Message:</label>
  <textarea id="shoutout-message" placeholder="Enter shoutout message"></textarea>
  <button onclick="setShoutout()">Save Shoutout</button>
</div>

<!-- Back Button -->
<a href="index.html" class="back-btn">Back to Main Page</a>

<script>
  // Function to load suggestions from Google Sheets API
  async function loadSuggestions() {
    try {
      const res = await fetch('https://script.google.com/macros/s/AKfycbwY3LOFYimdP1rWji4d4wGM_JqikBqPPVgyAx2Uw-4/exec');
      const data = await res.json();
      const suggestionList = document.getElementById('suggestion-list');

      suggestionList.innerHTML = ''; // Clear the existing list

      // Add each suggestion to the list
      data.suggestions.forEach(suggestion => {
        const li = document.createElement('li');
        li.textContent = suggestion.text;
        suggestionList.appendChild(li);
      });
    } catch (error) {
      console.error('Error loading suggestions:', error);
    }
  }

  // Function to save shoutout message to Google Sheets API
  async function setShoutout() {
    const shoutoutName = document.getElementById('shoutout-name').value;
    const shoutoutMessage = document.getElementById('shoutout-message').value;

    if (!shoutoutName || !shoutoutMessage) {
      alert("Please fill in both the name and message.");
      return;
    }

    try {
      await fetch('https://script.google.com/macros/s/AKfycbwY3LOFYimdP1rWji4d4wGM_JqikBqPPVgyAx2Uw-4/exec', {
        method: 'POST',
        body: JSON.stringify({ shoutoutName, shoutoutMessage }),
      });

      alert('Shoutout saved successfully!');
    } catch (error) {
      console.error('Error saving shoutout:', error);
      alert('Failed to save shoutout.');
    }
  }

  // Call the loadSuggestions function when the page loads
  window.onload = loadSuggestions;
</script>

</body>
</html>
